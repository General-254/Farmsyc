<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FarmSyncBot - Your Farming Companion</title>
  <style>
    .feature-list li,
.signup-section {
  color: #333 !important;
}
    /* ===== LIGHT MODE DEFAULT STYLES ===== */
body {
  background-color: #f7fafc;
  color: #333;
}

.container, .signup-section {
  background-color: white;
  color: #333;
}

header {
  background-color: #2e7d32;
}

.get-started-btn {
  background-color: #4caf50;
}

.retry-btn {
  background-color: #2e7d32;
}

/* ===== DARK MODE STYLES ===== */
body.dark-mode {
  background-color: #1e1e1e;
  color: #f0f0f0;
}

.container, .signup-section {
  background-color: #2d2d2d;
  color: #f0f0f0;
}

header.dark-mode-header {
  background-color: #1b5e20;
}

.get-started-btn.dark-mode-button,
.retry-btn.dark-mode-button {
  background-color: #66bb6a;
  color: #000;
}
    /* Reset some defaults */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f7fafc;
      color: #333;
      line-height: 1.6;
    }

    header {
      background-color: #2e7d32;
      color: white;
      padding: 30px 20px;
      text-align: center;
    }

    .logo {
      width: 80px;
      height: auto;
      margin-bottom: 15px;
      border-radius: 10px;
    }

    .tagline {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    #api-status {
      padding: 15px;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 20px;
      font-weight: bold;
    }

    .retry-btn {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 16px;
      background-color: #2e7d32;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }

    .retry-btn:hover {
      background-color: #1b5e20;
    }

    .get-started-btn {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 24px;
      background-color: #4caf50;
      color: white;
      text-decoration: none;
      font-size: 1.2rem;
      border-radius: 6px;
      transition: background-color 0.3s ease;
    }

    .get-started-btn:hover {
      background-color: #388e3c;
    }

    .bot-info {
      display: none;
      animation: fadeIn 1s ease-in-out;
      margin-top: 30px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .feature-list {
      list-style: none;
      padding-left: 0;
    }

    .feature-list li {
      margin-bottom: 12px;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
    }

    .feature-list li::before {
      content: "‚úÖ";
      margin-right: 10px;
      color: #4caf50;
      font-size: 1.2rem;
    }

    .signup-section {
      margin-top: 30px;
      padding: 20px;
      background-color: #f1f8e9;
      border-left: 4px solid #66bb6a;
      border-radius: 5px;
    }

    .signup-section ol {
      padding-left: 20px;
    }

    .signup-section li {
      margin-bottom: 10px;
    }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9rem;
      color: #666;
      margin-top: 40px;
    }

    @media (max-width: 600px) {
      .get-started-btn {
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>

<header>
  <img src="logo.png" alt="FarmSyncBot Logo" class="logo">
  <h1>üåæ FarmSyncBot</h1>
  <p class="tagline">Your Smart Farming Assistant</p>
  <button id="theme-toggle" onclick="toggleTheme()">üåô Switch to Dark Mode</button>
</header>

<div class="container">
  <div id="api-status">Checking API status...</div>
  <button class="retry-btn" onclick="fetchStatus()">Retry</button>

  <br><br>

  <!-- Get Started Button -->
  <button class="get-started-btn" onclick="showBotInfo()">üí¨ Get Started</button>

  <!-- Bot Info Section (Hidden Initially) -->
  <div id="bot-info" class="bot-info">
    <h2>‚úîÔ∏è What I Can Do</h2>
    <ul id="bot-features" class="feature-list"></ul>

    <!-- How to Sign Up Section -->
    <div class="signup-section">
      <h3>üìù How to Use FarmSyncBot</h3>
      <ol>
        <li>Click on ‚ÄúGet Started‚Äù</li>
        <li>Open Webex</li>
        <li>Login or create a Webex account</li>
        <li>Search for <strong>FarmSyncBot</strong></li>
        <li>Send any message to start interacting</li>
      </ol>
    </div>
  </div>
</div>

<footer>
  <p>Farming Assistant Bot | Built by Jephthah Muchangi</p>
</footer>

<script>
  async function fetchStatus() {
    const statusDiv = document.getElementById("api-status");
    try {
      const response = await fetch("https://farmsyncbot-backend.richardndwigah1.repl.co/api ");

      if (!response.ok) throw new Error("API not OK");

      const data = await response.json();

      statusDiv.innerText = "‚úÖ API is online and responding.";
      statusDiv.style.backgroundColor = "#d4edda";
      statusDiv.style.borderColor = "#c3e6cb";
      statusDiv.style.color = "#155724";

      updateBotUI(data);
    } catch (error) {
      statusDiv.innerText = "‚ùå API connection failed. Please try again later.";
      statusDiv.style.backgroundColor = "#f8d7da";
      statusDiv.style.borderColor = "#dc3545";
      statusDiv.style.color = "#721c24";

      // Still show fallback features if API fails
      const featuresElement = document.getElementById("bot-features");
      featuresElement.innerHTML = "";

      const fallbackFeatures = [
        "Send Timely Farming Reminders",
        "Track Daily Farm Activities",
        "Store Planting and Harvest Records",
        "Provide Market and Weather Tips",
        "Monitor Livestock and Crops",
        "Send Alerts for Critical Actions",
        "Help with Daily Task Planning"
      ];

      fallbackFeatures.forEach(feature => {
        const li = document.createElement("li");
        li.textContent = feature;
        featuresElement.appendChild(li);
      });

      document.getElementById("bot-status").textContent = "Offline";
      document.getElementById("bot-status").style.color = "red";
    }
  }

  function updateBotUI(data) {
    const statusElement = document.getElementById("bot-status");
    statusElement.textContent = data.status || "Unavailable";
    statusElement.style.color = data.status === "Online" ? "green" : "red";

    const featuresElement = document.getElementById("bot-features");
    featuresElement.innerHTML = "";

    const features = data.features && Array.isArray(data.features)
      ? data.features
      : [
          "Send Timely Farming Reminders",
          "Track Daily Farm Activities",
          "Store Planting and Harvest Records",
          "Provide Market and Weather Tips",
          "Monitor Livestock and Crops",
          "Send Alerts for Critical Actions",
          "Help with Daily Task Planning"
        ];

    features.forEach(feature => {
      const li = document.createElement("li");
      li.textContent = feature;
      featuresElement.appendChild(li);
    });
  }

  function showBotInfo() {
    const botInfo = document.getElementById("bot-info");
    if (botInfo.style.display === "none" || botInfo.style.display === "") {
      botInfo.style.display = "block";
      window.location.hash = "#bot-info"; // Scroll to section
    }
  }

  // Run on page load
  window.onload = fetchStatus;
  // Dark Mode Toggle
function toggleTheme() {
  const body = document.body;
  const header = document.querySelector("header");
  const getStartedBtn = document.querySelector(".get-started-btn");
  const retryBtn = document.querySelector(".retry-btn");
  const themeToggle = document.getElementById("theme-toggle");

  body.classList.toggle("dark-mode");
  header.classList.toggle("dark-mode-header");
  getStartedBtn.classList.toggle("dark-mode-button");
  retryBtn.classList.toggle("dark-mode-button");

  if (body.classList.contains("dark-mode")) {
    themeToggle.textContent = "‚òÄÔ∏è Switch to Light Mode";
  } else {
    themeToggle.textContent = "üåô Switch to Dark Mode";
  }
  }
</script>

</body>
</html>
